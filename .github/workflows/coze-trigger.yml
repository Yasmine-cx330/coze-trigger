name: Coze Workflow Scheduled Trigger
on:
  schedule:
    - cron: '50 11 * * *'
  workflow_dispatch:  # 支持手动触发

jobs:
  trigger-coze-workflow:
    runs-on: ubuntu-latest
    steps:
      - name: 调用Coze API触发工作流
        run: |
          curl -X POST \
          -H "Content-Type: application/json" \
          -H "Authorization: Bearer pat_cNxCHWFzS2Ui9LvTyKJaRcxQ5sj7hxF7YTNGjxnIYjw8E5dFCyznIhV6OtLTfoND" \
          -d "{\"workflow_id\":\"7601840030646730794\",\"parameters\":{\"rss_list\":\"https://testyaxin.zeabur.app/feeds/MP_WXS_3920256514.atom\\nhttps://testyaxin.zeabur.app/feeds/MP_WXS_3919437249.atom\\nhttps://testyaxin.zeabur.app/feeds/MP_WXS_3005106710.atom\\nhttps://testyaxin.zeabur.app/feeds/MP_WXS_3080421900.atom\"}}" \
          "https://api.coze.cn/v1/workflow/run" \
          --retry 3 \
          --retry-delay 5
